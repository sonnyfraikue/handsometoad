<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-us" />
<title>Crop your image</title>
<script
	src="http://ajax.googleapis.com/ajax/libs/prototype/1.6.1.0/prototype.js"
	type="text/javascript"></script>
<script
	src="http://ajax.googleapis.com/ajax/libs/scriptaculous/1.8.2/scriptaculous.js"
	type="text/javascript"></script>
<link media="screen" href="css/cropper.css" rel="stylesheet"
	type="text/css">
<script src="js/cropper.js" type="text/javascript"></script>

<script type="text/javascript" charset="utf-8">


var assetnm	=	'{ASSETNAME}';

function refreshparent() {	
parent.parent.location.href = 'http://www.simpleposters.com';
} 

		// setup the callback function
		function onEndCrop( coords, dimensions ) {
			xcord1 = Math.round(coords.x1 * {FACTOR});
			ycord1 = Math.round(coords.y1 * {FACTOR});
			xcord2 = Math.round(coords.x2 * {FACTOR});
			ycord2 = Math.round(coords.y2 * {FACTOR});
			cordwidth = Math.round(dimensions.width * {FACTOR});
			cordheight = Math.round(dimensions.height * {FACTOR});
		}

		function cropper()
		{
myusefulInstance.crop(assetnm, {JID}, cordwidth, cordheight, xcord1, ycord1, {  
   
    "onFinish": function(response){  
     if(response)
     {
    	 document.getElementById('testWrap').innerHTML	= response;

    	 refreshparent();
     }   
         
    }  
}); 
}

		

		
		// basic example
		Event.observe( 
			window, 
			'load', 
			function () { 
				new Cropper.Img( 
					'testImage',
					{
						minWidth: {RATIOWIDTH}, 
						minHeight: {RATIOHEIGHT}, 
						ratioDim: { x: {RATIOWIDTH}, y: {RATIOHEIGHT} },
						displayOnInit: true, 
						onEndCrop: onEndCrop


					}
				) 
			}
		);


		function rotate()
		{
			imgpath	=	'{IMAGEPATH}';
			imgwidth = {WIDTH};
			imgheight = {HEIGHT};
			jid	=	{JID};
			
myusefulInstance.rotate(jid,imgpath,imgwidth,imgheight, {  
   
    "onFinish": function(response){  
     if(response)
     {
    	 document.getElementById('testWrap').innerHTML	= response;
    	 new Cropper.Img( 
					'testImage',
					{
						minWidth: {RATIOWIDTH}, 
						minHeight: {RATIOHEIGHT}, 
						ratioDim: { x: {RATIOWIDTH}, y: {RATIOHEIGHT} },
						displayOnInit: true, 
						onEndCrop: onEndCrop
						 
					}
				) 
    	 
    	 
    	 
     }   
         
    }  
}); 
}
	</script>
<link media="screen" href="css/default.1.css" rel="stylesheet"
	type="text/css">
	
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2609844-2");
pageTracker._trackPageview();
} catch(err) {}</script>
</head>
<body>
<div id="cropControls">
<div class="cropbtns" onclick="cropper();">crop</div>
<div style="display:none;" class="cropbtns" onclick="rotate();">rotate</div>
<div class="cropbtns" onclick="greyscale();">greyscale</div>
<div class="cropbtns" onclick="refreshparent();">back</div>
</div>

<div id="testWrap"><img src="{IMAGEPATH}" alt="test image"
	id="testImage" width="{WIDTH}" height="{HEIGHT}" /></div>

</body>
</html>


