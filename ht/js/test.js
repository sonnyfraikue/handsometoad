 var json_object; RI_International = { selector_country: '', elm_countries: '', init: function () { this.selector_country = '#countries'; this.elm_countries = $(RI_International.selector_country); this._showHide(); this._generateHTML(); }, _showHide : function(){ $('#internation-delivery-container #js-version').show(); $('#internation-delivery-container #non-js-version').hide(); }, _getJSONObject: function() { if ( json_international_data.length === 0) throw new Error('International data error');	 return json_international_data;	 }, _generateHTML: function(){ var countries_list_html = ''; json_object = RI_International._getJSONObject(); countries_list_html+= ''; for (var i in json_object) { countries_list_html+= ''; } this._addEvents(countries_list_html); }, _addEvents: function(countries_list_html) { this.elm_countries.html(countries_list_html); $("#internation-delivery-container form").on('change', this.selector_country, function() { var name = ''; var iso_code	 =	''; var delivery_time = ''; var delivery_time_express =	''; var cost = ''; var cost_express	 =	''; var lod	 =	''; iso_code	= $(this).find('option:selected').data('code') for (var i in json_object) { if(json_object[i].country.isocode == iso_code){ name = json_object[i].country.name; iso_code	 = json_object[i].country.isocode; delivery_time = json_object[i].country.delivery_time; delivery_time_express	= json_object[i].country.express_delivery_time?json_object[i].country.express_delivery_time:null; cost = json_object[i].country.cost; cost_express	 = json_object[i].country.express_cost?json_object[i].country.express_cost:null; lod = json_object[i].country.last_order_date; RI_International._updateHTML(name, delivery_time, cost, lod, delivery_time_express, cost_express); return false; } } }); }, _updateHTML: function(name, delivery_time, cost, lod, delivery_time_express, cost_express){ var selector_table_delivery = 'table.international-delivery'; var shipping_express = $(selector_table_delivery).find('tr').last(); $(selector_table_delivery + ' span#name').text(name); $(selector_table_delivery + ' span#name_express').text(name); $(selector_table_delivery + ' span#service').text('Standard Delivery'); $(selector_table_delivery + ' span#service_express').text('Express Delivery'); $(selector_table_delivery + ' span#delivery-time').html(delivery_time); $(selector_table_delivery + ' span#delivery-time_express').html(delivery_time_express); $(selector_table_delivery + ' span#cost').html(cost); $(selector_table_delivery + ' span#cost_express').html(cost_express); $(selector_table_delivery + ' span#last-order-date').html(lod); $('.international-delivery').fadeIn(); if (delivery_time_express) shipping_express.fadeIn(); else shipping_express.fadeOut() } } RI_International.init();